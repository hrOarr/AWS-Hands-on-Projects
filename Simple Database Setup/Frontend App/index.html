<!DOCTYPE html>
<html>
<head>
    <title>Cloud Events App</title>
</head>
<body>

<h2>Create Event</h2>
<input id="title" placeholder="Title" />
<br><br>
<textarea id="description" placeholder="Description"></textarea>
<br><br>
<button onclick="createEventHandler()">Create</button>

<hr>

<h2>Events</h2>
<ul id="events"></ul>

<script>
const API_URL = "http://localhost:5000/api/events";

function loadEvents() {
    fetch(API_URL)
        .then(res => res.json())
        .then(data => {
            const list = document.getElementById("events");
            list.innerHTML = "";
            data.forEach(e => {
                list.innerHTML += `
                    <li>
                        <b>${e.title}</b> - ${e.description}
                        <button onclick="deleteEvent(${e.id})">Delete</button>
                    </li>
                `;
            });
        });
}

function createEventHandler() {
    fetch(API_URL, {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({
            title: document.getElementById("title").value,
            description: document.getElementById("description").value
        })
    }).then(loadEvents);
}

function deleteEvent(id) {
    fetch(`${API_URL}/${id}`, { method: "DELETE" })
        .then(loadEvents);
}

loadEvents();
</script>

</body>
</html>